# inventories/prod/group_vars/all.yml

# Path to kubeconfig for connecting to the cluster
kubeconfig: /home/administrator/.kube/config

# Moodle deployment settings
moodle:
  namespace: moodle
  release_name: moodle
  replica_count: 3        # first deployment; scale later
  php_fpm_config_map: moodle-php-fpm-config

  service:
    type: NodePort
    nodePort: 31203

  persistence:
    enabled: true
    size: 200Gi
    storageClass: rook-cephfs
    accessModes:
      - ReadWriteMany

  resources:
    requests:
      cpu: "4000m"
      memory: "8Gi"
    limits:
      cpu: "6000m"
      memory: "10Gi"

# External PostgreSQL database
external_db:
  host: moodle-db-cluster.database.svc.cluster.local
  port: 5432
  user: moodleuser
  database: moodledb
  type: pgsql

# External Redis (Dragonfly)
dragonfly:
  host: dragonfly-redis-master.dragonfly-system.svc.cluster.local
  port: 6379

# Secrets
external_db_password: "PQl5YR30j9geR9NrgLTPxzTBkNZ2OYIDDiLaDZm946Nk7O1mWmPsArY5C7yj9vcw"
dragonfly_password: "dragonfly"
moodle_admin_password: "admin123"
